
**Проект для преобразования текста статьи в озвучиваемый диалог отца и дочери.**

________________________________________________________
# Исполнители
Калинкина Полина - teamlead
Комкова Ирина-  analyst
Цветков Илья- ml-engineer
Баевский Андрей- ml-engineer
Латунова Лариса- backend-разработчик
________________________________________________________
# Архитектура
Установка API-ключа и создание клиента OpenAI:
Программа начинается с установки API-ключа и создания экземпляра клиента OpenAI для работы с моделью GPT-4o-mini. Клиент создаётся с указанием прокси-адреса API.
Определение промпта и инструкций для модели:
В переменной previsions задаются правила и контекст для диалога, представляющего беседу между отцом и дочерью. Промпт включает рекомендации по формату диалога, стилю общения и обработке сложных понятий, а также инструкцию для обработки случайных символов. Эти инструкции передаются в messages как начальное сообщение от system, обеспечивая выполнение настроек во время создания диалога.

Извлечение и очистка текста из различных источников:
Программа содержит функции для извлечения текста из разных источников:

 • extract_text_from_txt(file_path) — Извлекает и очищает текст из текстовых файлов (.txt).
 • extract_text_from_pdf(file_path) — Извлекает текст из PDF-документов с помощью библиотеки PdfReader.
 • extract_text_from_url(url) — Извлекает текст с веб-страниц с использованием BeautifulSoup для работы с HTML-кодом.

Подготовка текста для модели:
Функция get_text_from_source(source) определяет тип источника (файл или URL) и вызывает соответствующую функцию для извлечения и очистки текста. Извлечённый текст проходит дополнительную очистку в функции clean_text(text), чтобы удалить лишние пробелы и символы, облегчая восприятие текста моделью.

Запрос на резюмирование текста (summarize_pdf_content):
Функция summarize_pdf_content(pdf_text) отправляет подготовленный текст в модель GPT-4o-mini с определёнными параметрами:

 • temperature управляет креативностью модели, а top_p контролирует разнообразие ответов, что определяет уровень вариативности ответов.
 • На основе данных настроек и заданного контекста модель возвращает сжатое резюме текста в виде диалога между отцом и дочерью.

Вывод результата:
В результате программа выводит сгенерированное резюме текста, организованное в формате диалога, что позволяет эффективно воспринимать содержание сложных статей.

файл sinthesis.py.

Определение функции synthesize_speech: получение ответа от llm; получение API токена из переменной окружения; установка соединения с Tinkoff TTS через протокол gRPC; создание и отправка запроса на синтез речи; получение аудио в байтах

Определение функции create_wav: последовательная запись реплик в созданный (перезаписанный) wav-файл; добавление пауз в несколько миллисекунд в начале и конце файла для того, чтобы диалог не обрезался

Stremlit
Описывает сайт с титулом и логотипом нашего клуба. Дает польщователю выбрать тип загружаемого документа: txt, pdf, url. После загрудки обрабатывается ml. И пользователю выводиться:
Файл на скачивание txt файл c беседой, 
Аудиозапись с беседой формата wav
Выводиться текст беседы
После смены типы файла, беседа обновляется.

Dockerfile
Берет образ Python 3.12. Устанавливает poetry в контейнер вместе с необходимыми библиотеками, а также копирует код с виртуальной машину в контейнер. Указывается порт 8501. При поднятии контейнера автоматически запускается нашей программой.
________________________________________________________
## Установка
Инструкции по установке проекта. 
```sh
git clone https://24hours.gitlab.yandexcloud.net/24hours-team-21/t_bank_24_hack
cd проект
npm install